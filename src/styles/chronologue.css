/* Chronologue Mode Styles */

/* Chronologue timeline arc */
.rt-chronologue-timeline-arc {
  pointer-events: none;
}

.rt-chronologue-timeline-arc line:not(.rt-elapsed-endpoint-marker) {
  stroke: var(--text-muted);
  stroke-width: 1;
}

/* Chronologue time labels */
.rt-chronologue-time-label {
  font-size: 10px;
  fill: var(--text-muted);
  opacity: 0.7;
  pointer-events: none;
}

/* Chronologue warning for scenes without When field */
.rt-chronologue-warning .rt-scene-path {
  stroke: var(--text-error);
  stroke-width: 2;
  stroke-dasharray: 4 4;
}

/* Hide chronological ticks that overlap with elapsed endpoint markers */
.rt-chronological-tick.rt-tick-hidden {
  opacity: 0;
  pointer-events: none;
}

/* Elapsed time label */
.rt-elapsed-time-group {
  pointer-events: none;
}

.rt-elapsed-time-label {
  font-size: 16px;
  font-weight: 700;
  fill: var(--interactive-accent);
  stroke: white;
  stroke-width: 7px;
  stroke-linejoin: round;
  stroke-linecap: round;
  paint-order: stroke fill;
  text-transform: uppercase;
}

.rt-chronologue-duration-ticks {
  pointer-events: none;
}

.rt-chronologue-duration-ticks .rt-duration-arc {
  stroke: var(--text-muted);
  stroke-width: 6px;
}

.rt-chronologue-duration-ticks .rt-duration-arc-overlap {
  stroke: #ff9900;
  /* Yellow for temporal overlaps */
  stroke-width: 6px;
  /*stroke-dasharray: 4, 1; /* Dotted pattern: 4px dash, 1px gap */
}

.rt-chronologue-duration-ticks .rt-duration-arc-unparseable {
  stroke: var(--rt-color-due);
  /* Red for unparseable/missing durations */
  stroke-width: 6px;
}

.rt-chronologue-duration-ticks .rt-duration-arc-ongoing:not(.rt-duration-arc-overlap) {
  stroke: var(--text-muted);
  /* Standard color for "ongoing" durations */
  stroke-width: 6px;
}

/* Discontinuity marker text "âˆž" - infinity symbol marks large time jumps between scenes in chronologue mode */
.rt-discontinuity-marker {
  font-size: 20px;
  font-weight: 500;
  fill: var(--text-muted);
  stroke: rgb(0, 0, 0);
  stroke-width: 6px;
  stroke-linejoin: round;
  stroke-linecap: round;
  paint-order: stroke fill;
  pointer-events: none;
  /* Hide discontinuity markers by default (only show in shift mode) */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, fill 0.2s ease;
  /* Add transition to base state for both directions */
}

/* Show discontinuity markers when shift mode is active */
svg[data-shift-mode="active"] .rt-discontinuity-marker {
  opacity: 1;
  visibility: visible;
}

/* ==========================================================================
   Backdrop Ring Styles
   ========================================================================== */

.rt-backdrop-ring {
  pointer-events: none;
  /* Let clicks pass through to synopsis */
}

.rt-backdrop-ring-background {
  stroke: var(--rt-color-empty);
  /* Match 'rt-void-cell' density for a cohesive "empty" lane */
  stroke-opacity: 0.9;
  fill: none !important;
}

.rt-backdrop-segment {
  stroke: var(--rt-color-todo);
  /* Use the 'todo' gray color */
  stroke-opacity: 0.3;
  opacity: 1;
  transition: stroke-opacity 0.2s ease, opacity 0.2s ease;
  cursor: pointer;
}

.rt-backdrop-segment:hover,
.rt-backdrop-segment.rt-selected {
  stroke: var(--rt-color-empty) !important;
  stroke-opacity: 1 !important;
  /* Full Highlight */
}

/* Overlap pattern: Alternating visual style (stroke-dasharray handled inline for offset) */
.rt-backdrop-overlap {
  opacity: 1;
}

/* Repeating text label along the arc */
.rt-backdrop-label {
  /* Use the custom bit font */
  font-family: 'hooge05_55Regular', monospace, ui-monospace, SFMono-Regular;
  font-size: 20px;
  font-weight: normal;
  fill: var(--rt-color-empty);
  /* 100% White */
  stroke: none;
  /* NO STROKE BY DEFAULT */
  text-shadow: none;
  dominant-baseline: middle;
  pointer-events: none;
  letter-spacing: 1px;
  text-transform: uppercase;
  transition: fill 0.2s ease, opacity 0.2s ease, stroke 0.2s ease;
}

.rt-backdrop-segment:hover+.rt-backdrop-label,
.rt-backdrop-segment.rt-selected+.rt-backdrop-label {
  fill: var(--rt-color-empty) !important;
  opacity: 1 !important;
  stroke: #000000 !important;
  stroke-width: 3px !important;
  stroke-linejoin: round !important;
  stroke-linecap: round !important;
  paint-order: stroke fill !important;
}

/* Global Fade: When any scene is hovered, stay "light gray" (void-like) 
   instead of turning dark/transparent, to provide a clean base for synopsis */
.radial-timeline-svg.scene-hover .rt-backdrop-segment:not(:hover) {
  stroke: var(--rt-color-empty-selected) !important;
  stroke-opacity: 0.9 !important;
}

/* Dim all labels in scene-hover by default to clear space for synopsis */
.radial-timeline-svg.scene-hover .rt-backdrop-label {
  fill: var(--rt-color-empty-selected) !important;
  opacity: 0.1 !important;
  stroke: none !important;
}

.radial-timeline-svg.scene-hover .rt-backdrop-segment:hover+.rt-backdrop-label {
  fill: var(--rt-color-empty) !important;
  opacity: 1 !important;
  stroke: #000000 !important;
}

.radial-timeline-svg.scene-hover .rt-backdrop-ring-background {
  stroke: var(--rt-color-empty-selected) !important;
  stroke-opacity: 0.9 !important;
}

/* Shift mode compliance */
.radial-timeline-svg[data-shift-mode="active"] .rt-backdrop-ring {
  opacity: 0.15;
  transition: opacity 0.2s ease;
}

/* Re-brighten on hover during shift mode */
.radial-timeline-svg[data-shift-mode="active"] .rt-backdrop-segment:hover {
  opacity: 1;
}

.radial-timeline-svg[data-shift-mode="active"] .rt-backdrop-segment:hover+.rt-backdrop-label {
  opacity: 1;
}